{"ast":null,"code":"var _jsxFileName = \"/usr/src/app/client/src/View/Pages/CourseSheetPage.tsx\";\nimport React from 'react';\nimport Request from '../../API/Request';\nimport { Document, Page, pdfjs } from 'react-pdf';\n\nclass CourseSheetPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      file: null,\n      numPages: 0\n    };\n    this.getFile = this.getFile.bind(this);\n    this.openFile = this.openFile.bind(this);\n    this.onDocumentLoadSuccess = this.onDocumentLoadSuccess.bind(this);\n  }\n\n  componentDidMount() {\n    this.getFile();\n  }\n\n  getFile() {\n    new Request('/lobby/coursesheet/' + this.props.location.pathname.split(/\\//)[2], this.openFile, 'POST', {\n      path: this.props.location.pathname.split(/\\//)[4]\n    }, 'json', 'blob');\n  }\n\n  openFile(data) {\n    this.setState({\n      file: data\n    }, () => pdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`);\n  }\n\n  onDocumentLoadSuccess(document) {\n    this.setState({\n      numPages: document._pdfInfo.numPages\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: 'container-fluid',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: 'row container-fluid',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: 'col-12',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, this.props.location.pathname.split(/\\//)[3]))), React.createElement(\"div\", {\n      className: 'row container-fluid mt-5',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: 'col-12',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(Document, {\n      file: this.state.file,\n      onLoadSuccess: this.onDocumentLoadSuccess,\n      noData: React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, \"Chargement...\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, Array.from(new Array(this.state.numPages), (el, index) => React.createElement(Page, {\n      key: `page_${index + 1}`,\n      pageNumber: index + 1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }))))));\n  }\n\n}\n\nexport default CourseSheetPage;","map":{"version":3,"sources":["/usr/src/app/client/src/View/Pages/CourseSheetPage.tsx"],"names":["React","Request","Document","Page","pdfjs","CourseSheetPage","Component","constructor","props","state","file","numPages","getFile","bind","openFile","onDocumentLoadSuccess","componentDidMount","location","pathname","split","path","data","setState","GlobalWorkerOptions","workerSrc","version","document","_pdfInfo","render","Array","from","el","index"],"mappings":"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","sourcesContent":["import React, {ReactNode} from 'react';\nimport Request from '../../API/Request';\nimport {Document, Page, pdfjs} from 'react-pdf';\n\ninterface CourseSheetPageProps {\n    location: any,\n}\n\ninterface CourseSheetPageState {\n    file: File | null,\n    numPages: number,\n}\n\nclass CourseSheetPage extends React.Component<CourseSheetPageProps, CourseSheetPageState> {\n\n    public constructor(props: CourseSheetPageProps) {\n        super(props);\n        this.state = {\n            file: null,\n            numPages: 0,\n        }\n        this.getFile = this.getFile.bind(this);\n        this.openFile = this.openFile.bind(this);\n        this.onDocumentLoadSuccess = this.onDocumentLoadSuccess.bind(this);\n    }\n\n    public componentDidMount(): void {\n        this.getFile();\n    }\n\n    public getFile(): void {\n        new Request(\n            '/lobby/coursesheet/' + this.props.location.pathname.split(/\\//)[2],\n            this.openFile,\n            'POST',\n            {\n                path: this.props.location.pathname.split(/\\//)[4]\n            },\n            'json',\n            'blob',\n        );\n    }\n\n    public openFile(data: any): void {\n        this.setState(\n            {file: data},\n            () => pdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`\n        );\n    }\n\n    public onDocumentLoadSuccess(document: any): void {\n        this.setState({numPages: document._pdfInfo.numPages});\n    }\n\n    public render(): ReactNode {\n        return (\n            <div className={'container-fluid'}>\n                <div className={'row container-fluid'}>\n                    <div className={'col-12'}>\n                        <h1>{this.props.location.pathname.split(/\\//)[3]}</h1>\n                    </div>\n                </div>\n                <div className={'row container-fluid mt-5'}>\n                    <div className={'col-12'}>\n                        <Document\n                            file={this.state.file}\n                            onLoadSuccess={this.onDocumentLoadSuccess}\n                            noData={<h4>Chargement...</h4>}\n                        >\n                            {\n                                Array.from(\n                                    new Array(this.state.numPages),\n                                    (el, index) => (\n                                        <Page\n                                            key={`page_${index + 1}`}\n                                            pageNumber={index + 1}\n                                        />\n                                    ),\n                                )\n                            }\n                        </Document>\n                    </div>\n                </div>\n\n            </div>\n        );\n    }\n}\n\nexport default CourseSheetPage;\n"]},"metadata":{},"sourceType":"module"}