{"ast":null,"code":"var _jsxFileName = \"/usr/src/app/client/src/View/Lobby/LobbyBody.tsx\";\nimport React from \"react\";\nimport CourseSheets from \"../CourseSheet/CourseSheets\";\nimport Messages from \"../Message/Messages\";\nimport WriteMessageZone from \"../Message/WriteMessageZone\";\nimport LobbyDivider from \"./LobbyDivider\";\nimport SubmitButton from \"../General/Inputs/SubmitButton\";\nimport Input from \"../General/Inputs/Input\";\nimport DropBox from \"../General/Inputs/DropBox\";\nimport InputArea from \"../General/Inputs/InputArea\";\nimport HashtagInput from \"../Hashtag/HashtagInput\";\nimport Request from \"../../API/Request\";\nimport swal from \"sweetalert\";\n\nclass LobbyBody extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      newCourseSheetTitle: '',\n      newCourseSheetDescription: '',\n      newCourseSheetDocument: null,\n      hashtagInputIsNotEmpty: false,\n      hashtagsView: React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      }),\n      hashtags: [],\n      courseSheets: []\n    };\n    this.handleCourseSheetDescriptionChange = this.handleCourseSheetDescriptionChange.bind(this);\n    this.handleCourseSheetTitleChange = this.handleCourseSheetTitleChange.bind(this);\n    this.handleCourseSheetDocumentDrop = this.handleCourseSheetDocumentDrop.bind(this);\n    this.handleCourseSheetDocumentChange = this.handleCourseSheetDocumentChange.bind(this);\n    this.emptyInput = this.emptyInput.bind(this);\n    this.updateHashtagsView = this.updateHashtagsView.bind(this);\n    this.updateHashtags = this.updateHashtags.bind(this);\n    this.updateText = this.updateText.bind(this);\n    this.fillCourseSheets = this.fillCourseSheets.bind(this);\n    this.refreshCourseSheets = this.refreshCourseSheets.bind(this);\n    this.addCourseSheet = this.addCourseSheet.bind(this);\n  }\n\n  handleCourseSheetTitleChange(event) {\n    this.setState({\n      newCourseSheetTitle: event.target.value\n    });\n  }\n\n  handleCourseSheetDescriptionChange(event) {\n    this.setState({\n      newCourseSheetDescription: event.target.value\n    });\n  }\n\n  handleCourseSheetDocumentDrop(event) {\n    event.preventDefault();\n    this.setState({\n      newCourseSheetDocument: event.dataTransfer.files[0]\n    });\n  }\n\n  handleCourseSheetDocumentChange(event) {\n    // @ts-ignore\n    this.setState({\n      newCourseSheetDocument: event.target.files[0]\n    });\n  }\n\n  emptyInput(isEmpty) {\n    this.setState({\n      hashtagInputIsNotEmpty: isEmpty\n    });\n  }\n\n  updateHashtagsView(hashtagsView) {\n    this.setState({\n      hashtagsView: hashtagsView\n    });\n  }\n\n  updateHashtags(hashtags) {\n    this.setState({\n      hashtags: hashtags\n    });\n  }\n\n  updateText() {}\n\n  fillCourseSheets(payload) {\n    this.setState({\n      courseSheets: payload['success'] ? payload : []\n    }, () => this.forceUpdate(() => this.render()));\n  }\n\n  refreshCourseSheets() {\n    new Request('/course_sheet/course_sheets', this.fillCourseSheets, 'POST', {\n      'lobby_id': this.props.id\n    });\n  }\n\n  addCourseSheet(event) {\n    let formData = new FormData(); // @ts-ignore\n\n    formData.append('token', localStorage.getItem('token'));\n\n    if ('' !== this.state.newCourseSheetTitle && '' !== this.state.newCourseSheetDescription && null !== this.state.newCourseSheetDocument) {\n      formData.append('title', this.state.newCourseSheetTitle);\n      formData.append('description', this.state.newCourseSheetDescription);\n      formData.append('hashtags', JSON.stringify(this.state.hashtags));\n      formData.append('file', this.state.newCourseSheetDocument);\n      formData.append('lobby_id', '' + this.props.id);\n      new Request('/course_sheet/add_course_sheet', this.refreshCourseSheets, 'POST', formData, this.state.newCourseSheetDocument.type);\n      swal({\n        title: 'Ca y est !',\n        text: 'La fiche a bien été ajoutée !',\n        buttons: [false],\n        icon: 'success',\n        timer: 3000\n      });\n    } else {\n      swal({\n        title: 'Mince !',\n        text: 'Il y a eu un problème, la fiche n\\'a pas pu être ajoutée, ' + 'vérifie que tu as bien renseigné tous les champs.',\n        icon: 'warning'\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: 'col-12 pl-0',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: 'row pl-4 pl-md-1 pl-sm-1',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: 'col-lg-6 col-md-12 col-sm-12 col-xs-12 container-fluid pl-0 pl-lg-4 pl-md-4 pl-sm-4 pr-0',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, // @ts-ignore\n    this.props.courseSheets['success'] ? React.createElement(CourseSheets, {\n      id: this.props.id,\n      courseSheets: this.props.courseSheets,\n      className: 'mt-lg-3',\n      activeRemoveButton: false,\n      removableHashtags: false,\n      delete: undefined,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }) : React.createElement(\"div\", {\n      className: 'row mt-5',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: 'col-12 text-left',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: 'no-course-sheet-message',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, \"Il n'y a pas de fiches de cours pour l'instant\")))), React.createElement(\"div\", {\n      className: 'col-lg-6 col-md-12 col-sm-12 col-xs-12 container-fluid pl-0',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: 'row col-12 mt-lg-0 mt-md-0 mt-sm-5 mt-xs-5 ml-lg-4 ml-md-4 ml-sm-4 pl-0 ml-0',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: 'row container-fluid pr-0',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(LobbyDivider, {\n      dividerClassName: 'hidden-lg hidden-md pl-0 ml-0 mt-lg-0',\n      containerClassName: 'hidden-lg hidden-md pl-0 mt-lg-0 ml-0',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }))), // @ts-ignore\n    this.props.messages['success'] ? React.createElement(\"div\", {\n      className: 'row',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, React.createElement(Messages, {\n      id: this.props.id,\n      messages: this.props.messages,\n      className: 'mt-lg-5 mt-md-0 mt-sm-4 mt-xs-4 ml-0 ml-lg-4 ml-md-4 ml-sm-4 pt-lg-2 pt-md-0 pt-sm-2 pt-xs-2 pl-0',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    })) : React.createElement(\"div\", {\n      className: 'row mt-5 mb-5 ml-0',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: 'col-12 text-left pl-0 pl-lg-2 pl-md-4 pl-sm-4',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: 'no-messages-message',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, \"Il n'y a pas de messages pour l'instant\"))), React.createElement(\"div\", {\n      className: 'row',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, React.createElement(WriteMessageZone, {\n      labelLobby: this.props.labelLobby,\n      send: this.props.sendMessage,\n      update: this.props.updateMessage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    })))), () => {\n      if (this.props.displayNewCourseSheetForm) {\n        return React.createElement(\"div\", {\n          className: 'row',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 215\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: 'col-12 row mt-5',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 216\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: 'col-lg-4 col-md-4 col-sm-4 col-xs-12 pl-0 pr-lg-5 pr-md-0 pr-sm-0 pr-xs-0 pl-4 pl-lg-0 pl-md-0 pl-sm-0',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 217\n          },\n          __self: this\n        }, React.createElement(Input, {\n          id: 'title-input',\n          inputType: 'text',\n          placeholder: 'Titre',\n          className: 'no-mb',\n          checked: false,\n          formGroupClassName: 'mb-0 mb-lg-2 mb-md-1 mb-sm-0 pb-2 pb-lg-1 pb-md-0 pr-0 pl-0 pl-lg-4 pl-md-4 pl-sm-4 col-12',\n          onChange: this.handleCourseSheetTitleChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 219\n          },\n          __self: this\n        }), React.createElement(DropBox, {\n          id: 'course-sheet-input',\n          className: 'text-sm-left col-6 offset-3 offset-lg-0 offset-md-0 offset-sm-0 col-lg-12 col-md-12 col-sm-12 mt-3 mt-lg-0 mt-md-0 mt-sm-0 pt-3 pr-0 pl-0 pl-lg-4 pl-md-4 pl-sm-4',\n          labelClassName: 'lobby-file-upload',\n          backgroundClassName: 'mt-1',\n          labelNotDragged: 'Glisse une fiche par ici !',\n          labelDragged: 'Fiche déposée !',\n          accept: '.docx,.pdf,.html,.htm,.odp,txt,md',\n          handleFileDrop: this.handleCourseSheetDocumentDrop,\n          handleFileChange: this.handleCourseSheetDocumentChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 225\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: 'col-12 col-lg-8 col-md-8 col-sm-8 mt-4 mt-lg-0 mt-md-0 mt-sm-0 pt-2 pt-lg-0 pt-md-0 pt-sm-0 pr-0 pr-lg-4 pr-md-4 pr-sm-4 pl-4 pl-lg-0 pl-md-5 pl-sm-5',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 235\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: 'row container-fluid course-sheet-textarea-container pr-0 pl-4 pl-lg-0 pl-md-0 pl-sm-0',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 237\n          },\n          __self: this\n        }, React.createElement(InputArea, {\n          id: 'description-input',\n          placeholder: 'Description de la fiche\\nFais-en un bref résumé permettant de savoir à quoi s\\'attendre en la lisant',\n          className: 'col-12 pl-0 course-sheet-textarea',\n          textAreaClassName: 'course-sheet-textarea',\n          rows: 6,\n          onChange: this.handleCourseSheetDescriptionChange,\n          disabled: false,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 239\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: 'row container-fluid mb-4 pr-0 pl-4 pl-lg-0 pl-md-0 pl-sm-0',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 248\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: 'col-12 ml-0 pt-1 pr-0 pl-0',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 250\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: 'form-inline',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 252\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          id: \"hashtag-label\",\n          htmlFor: \"add-hashtags\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 253\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          id: \"hashtag-placeholder\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 254\n          },\n          __self: this\n        }, this.state.hashtagInputIsNotEmpty ? 'Entre des hashtags pour cette fiche' : '')), this.state.hashtagsView, React.createElement(\"div\", {\n          className: 'col-12 pl-0 pr-0',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 258\n          },\n          __self: this\n        }, React.createElement(HashtagInput, {\n          id: 'add-hashtags',\n          className: 'form-control w-100 mt-0 rounded hashtag-input col-12',\n          type: 'text',\n          baseIndent: -3,\n          onUpdate: this.emptyInput,\n          updateHashtagsView: this.updateHashtagsView,\n          updateHashtags: this.updateHashtags,\n          updateText: this.updateText,\n          hashtagClassName: 'hashtag-input-box hashtag',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 260\n          },\n          __self: this\n        }))))), React.createElement(\"div\", {\n          className: 'row container-fluid pr-0 pl-4 pl-lg-0 pl-md-0 pl-sm-0',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 275\n          },\n          __self: this\n        }, React.createElement(SubmitButton, {\n          text: 'Une nouvelle fiche ? Ajoute-la !',\n          onClick: this.addCourseSheet,\n          className: 'col-sm-12 container-fluid add-course-sheet-button mt-5 mr-0 ml-0 pl-0',\n          disconnectButton: 'plus',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 277\n          },\n          __self: this\n        })))));\n      }\n    });\n  }\n\n}\n\nexport default LobbyBody;","map":{"version":3,"sources":["/usr/src/app/client/src/View/Lobby/LobbyBody.tsx"],"names":["React","CourseSheets","Messages","WriteMessageZone","LobbyDivider","SubmitButton","Input","DropBox","InputArea","HashtagInput","Request","swal","LobbyBody","Component","constructor","props","state","newCourseSheetTitle","newCourseSheetDescription","newCourseSheetDocument","hashtagInputIsNotEmpty","hashtagsView","hashtags","courseSheets","handleCourseSheetDescriptionChange","bind","handleCourseSheetTitleChange","handleCourseSheetDocumentDrop","handleCourseSheetDocumentChange","emptyInput","updateHashtagsView","updateHashtags","updateText","fillCourseSheets","refreshCourseSheets","addCourseSheet","event","setState","target","value","preventDefault","dataTransfer","files","isEmpty","payload","forceUpdate","render","id","formData","FormData","append","localStorage","getItem","JSON","stringify","type","title","text","buttons","icon","timer","undefined","messages","labelLobby","sendMessage","updateMessage","displayNewCourseSheetForm"],"mappings":"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","sourcesContent":["import React, {ChangeEvent, ReactNode} from \"react\";\nimport CourseSheets from \"../CourseSheet/CourseSheets\";\nimport Messages from \"../Message/Messages\";\nimport WriteMessageZone from \"../Message/WriteMessageZone\";\nimport LobbyDivider from \"./LobbyDivider\";\nimport SubmitButton from \"../General/Inputs/SubmitButton\";\nimport Input from \"../General/Inputs/Input\";\nimport DropBox from \"../General/Inputs/DropBox\";\nimport InputArea from \"../General/Inputs/InputArea\";\nimport HashtagInput from \"../Hashtag/HashtagInput\";\nimport Request from \"../../API/Request\";\nimport swal from \"sweetalert\";\n\ninterface LobbyBodyProps {\n    id: string,\n    labelLobby: string,\n    courseSheets: [],\n    messages: any,\n    sendMessage: (event: React.MouseEvent<HTMLButtonElement>) => void,\n    updateMessage: (content: string) => void,\n    displayNewCourseSheetForm: boolean,\n}\n\ninterface LobbyBodyState {\n    newCourseSheetTitle: string,\n    newCourseSheetDescription: string,\n    newCourseSheetDocument: File | null,\n    hashtagInputIsNotEmpty: boolean,\n    hashtagsView: ReactNode,\n    hashtags: string[],\n    courseSheets: [],\n}\n\nclass LobbyBody extends React.Component<LobbyBodyProps, LobbyBodyState> {\n\n    public constructor(props: LobbyBodyProps) {\n        super(props);\n\n        this.state = {\n            newCourseSheetTitle: '',\n            newCourseSheetDescription: '',\n            newCourseSheetDocument: null,\n            hashtagInputIsNotEmpty: false,\n            hashtagsView: <div></div>,\n            hashtags: [],\n            courseSheets: [],\n        }\n\n        this.handleCourseSheetDescriptionChange = this.handleCourseSheetDescriptionChange.bind(this);\n        this.handleCourseSheetTitleChange = this.handleCourseSheetTitleChange.bind(this);\n        this.handleCourseSheetDocumentDrop = this.handleCourseSheetDocumentDrop.bind(this);\n        this.handleCourseSheetDocumentChange = this.handleCourseSheetDocumentChange.bind(this);\n        this.emptyInput = this.emptyInput.bind(this);\n        this.updateHashtagsView = this.updateHashtagsView.bind(this);\n        this.updateHashtags = this.updateHashtags.bind(this);\n        this.updateText = this.updateText.bind(this);\n        this.fillCourseSheets = this.fillCourseSheets.bind(this);\n        this.refreshCourseSheets = this.refreshCourseSheets.bind(this);\n        this.addCourseSheet = this.addCourseSheet.bind(this);\n    }\n\n    public handleCourseSheetTitleChange(event: ChangeEvent<HTMLInputElement>): void {\n        this.setState({newCourseSheetTitle: event.target.value});\n    }\n\n    public handleCourseSheetDescriptionChange(event: ChangeEvent<HTMLTextAreaElement>): void {\n        this.setState({newCourseSheetDescription: event.target.value});\n    }\n\n    public handleCourseSheetDocumentDrop(event: React.DragEvent<HTMLDivElement>): void {\n        event.preventDefault();\n        this.setState({newCourseSheetDocument: event.dataTransfer.files[0]});\n    }\n\n    public handleCourseSheetDocumentChange(event: ChangeEvent<HTMLInputElement>): void {\n        // @ts-ignore\n        this.setState({newCourseSheetDocument: event.target.files[0]});\n    }\n\n    public emptyInput(isEmpty: boolean): void {\n        this.setState({hashtagInputIsNotEmpty: isEmpty});\n    }\n\n    public updateHashtagsView(hashtagsView: ReactNode): void {\n        this.setState({hashtagsView: hashtagsView});\n    }\n\n    public updateHashtags(hashtags: string[]): void {\n        this.setState({hashtags: hashtags});\n    }\n\n    public updateText(): void {\n\n    }\n\n    public fillCourseSheets(payload: any): void {\n        this.setState({courseSheets: payload['success'] ? payload : []},\n            () => this.forceUpdate(() => this.render())\n        );\n    }\n\n    public refreshCourseSheets(): void {\n        new Request(\n            '/course_sheet/course_sheets',\n            this.fillCourseSheets,\n            'POST',\n            {\n                'lobby_id': this.props.id,\n            }\n        );\n    }\n\n    public addCourseSheet(event: React.MouseEvent<HTMLButtonElement, MouseEvent>): void {\n        let formData = new FormData();\n        // @ts-ignore\n        formData.append('token', localStorage.getItem('token'));\n        if (\n            '' !== this.state.newCourseSheetTitle &&\n            '' !== this.state.newCourseSheetDescription &&\n            null !== this.state.newCourseSheetDocument\n        ) {\n            formData.append('title', this.state.newCourseSheetTitle);\n            formData.append('description', this.state.newCourseSheetDescription);\n            formData.append('hashtags', JSON.stringify(this.state.hashtags));\n            formData.append('file', this.state.newCourseSheetDocument);\n            formData.append('lobby_id', '' + this.props.id);\n            new Request(\n                '/course_sheet/add_course_sheet',\n                this.refreshCourseSheets,\n                'POST',\n                formData,\n                this.state.newCourseSheetDocument.type,\n            );\n            swal({\n                title: 'Ca y est !',\n                text: 'La fiche a bien été ajoutée !',\n                buttons: [false],\n                icon: 'success',\n                timer: 3000,\n            });\n        } else {\n            swal({\n                title: 'Mince !',\n                text: 'Il y a eu un problème, la fiche n\\'a pas pu être ajoutée, ' +\n                    'vérifie que tu as bien renseigné tous les champs.',\n                icon: 'warning',\n            });\n        }\n    }\n\n    public render(): ReactNode {\n        return (\n            <div className={'col-12 pl-0'}>\n                <div className={'row pl-4 pl-md-1 pl-sm-1'}>\n                    <div className={'col-lg-6 col-md-12 col-sm-12 col-xs-12 container-fluid pl-0 pl-lg-4 pl-md-4 pl-sm-4 pr-0'}>\n                        {\n                            // @ts-ignore\n                            this.props.courseSheets['success'] ?\n                                <CourseSheets\n                                    id={this.props.id}\n                                    courseSheets={this.props.courseSheets}\n                                    className={'mt-lg-3'}\n                                    activeRemoveButton={false}\n                                    removableHashtags={false}\n                                    delete={undefined}\n                                />\n                                :\n                                <div className={'row mt-5'}>\n                                    <div className={'col-12 text-left'}>\n                                        <p className={'no-course-sheet-message'}>Il n'y a pas de fiches de cours pour l'instant</p>\n                                    </div>\n                                </div>\n                        }\n                    </div>\n                    <div className={'col-lg-6 col-md-12 col-sm-12 col-xs-12 container-fluid pl-0'}>\n                        <div className={'row col-12 mt-lg-0 mt-md-0 mt-sm-5 mt-xs-5 ml-lg-4 ml-md-4 ml-sm-4 pl-0 ml-0'}>\n                            <div className={'row container-fluid pr-0'}>\n\n                                <LobbyDivider\n                                    dividerClassName={'hidden-lg hidden-md pl-0 ml-0 mt-lg-0'}\n                                    containerClassName={'hidden-lg hidden-md pl-0 mt-lg-0 ml-0'}\n                                />\n                            </div>\n                        </div>\n                        {\n                            // @ts-ignore\n                            this.props.messages['success'] ?\n                                <div className={'row'}>\n                                    <Messages\n                                        id={this.props.id}\n                                        messages={this.props.messages}\n                                        className={'mt-lg-5 mt-md-0 mt-sm-4 mt-xs-4 ml-0 ml-lg-4 ml-md-4 ml-sm-4 pt-lg-2 pt-md-0 pt-sm-2 pt-xs-2 pl-0'}\n                                    />\n                                </div>\n                                :\n                                <div className={'row mt-5 mb-5 ml-0'}>\n                                    <div className={'col-12 text-left pl-0 pl-lg-2 pl-md-4 pl-sm-4'}>\n                                        <p className={'no-messages-message'}>Il n'y a pas de messages pour l'instant</p>\n                                    </div>\n                                </div>\n                        }\n                        <div className={'row'}>\n                            <WriteMessageZone\n                                labelLobby={this.props.labelLobby}\n                                send={this.props.sendMessage}\n                                update={this.props.updateMessage}\n                            />\n                        </div>\n                    </div>\n                </div>\n                {\n                    () => {\n                        if (this.props.displayNewCourseSheetForm) {\n                            return (\n                                <div className={'row'}>\n                                    <div className={'col-12 row mt-5'}>\n                                        <div\n                                            className={'col-lg-4 col-md-4 col-sm-4 col-xs-12 pl-0 pr-lg-5 pr-md-0 pr-sm-0 pr-xs-0 pl-4 pl-lg-0 pl-md-0 pl-sm-0'}>\n                                            <Input id={'title-input'} inputType={'text'}\n                                                   placeholder={'Titre'}\n                                                   className={'no-mb'}\n                                                   checked={false}\n                                                   formGroupClassName={'mb-0 mb-lg-2 mb-md-1 mb-sm-0 pb-2 pb-lg-1 pb-md-0 pr-0 pl-0 pl-lg-4 pl-md-4 pl-sm-4 col-12'}\n                                                   onChange={this.handleCourseSheetTitleChange}/>\n                                            <DropBox id={'course-sheet-input'}\n                                                     className={'text-sm-left col-6 offset-3 offset-lg-0 offset-md-0 offset-sm-0 col-lg-12 col-md-12 col-sm-12 mt-3 mt-lg-0 mt-md-0 mt-sm-0 pt-3 pr-0 pl-0 pl-lg-4 pl-md-4 pl-sm-4'}\n                                                     labelClassName={'lobby-file-upload'}\n                                                     backgroundClassName={'mt-1'}\n                                                     labelNotDragged={'Glisse une fiche par ici !'}\n                                                     labelDragged={'Fiche déposée !'}\n                                                     accept={'.docx,.pdf,.html,.htm,.odp,txt,md'}\n                                                     handleFileDrop={this.handleCourseSheetDocumentDrop}\n                                                     handleFileChange={this.handleCourseSheetDocumentChange}/>\n                                        </div>\n                                        <div\n                                            className={'col-12 col-lg-8 col-md-8 col-sm-8 mt-4 mt-lg-0 mt-md-0 mt-sm-0 pt-2 pt-lg-0 pt-md-0 pt-sm-0 pr-0 pr-lg-4 pr-md-4 pr-sm-4 pl-4 pl-lg-0 pl-md-5 pl-sm-5'}>\n                                            <div\n                                                className={'row container-fluid course-sheet-textarea-container pr-0 pl-4 pl-lg-0 pl-md-0 pl-sm-0'}>\n                                                <InputArea id={'description-input'}\n                                                           placeholder={'Description de la fiche\\nFais-en un bref résumé permettant de savoir à quoi s\\'attendre en la lisant'}\n                                                           className={'col-12 pl-0 course-sheet-textarea'}\n                                                           textAreaClassName={'course-sheet-textarea'}\n                                                           rows={6}\n                                                           onChange={this.handleCourseSheetDescriptionChange}\n                                                           disabled={false}\n                                                />\n                                            </div>\n                                            <div\n                                                className={'row container-fluid mb-4 pr-0 pl-4 pl-lg-0 pl-md-0 pl-sm-0'}>\n                                                <div\n                                                    className={'col-12 ml-0 pt-1 pr-0 pl-0'}>\n                                                    <div className={'form-inline'}>\n                                                        <label id=\"hashtag-label\" htmlFor=\"add-hashtags\">\n                                                                        <span\n                                                                            id=\"hashtag-placeholder\">{this.state.hashtagInputIsNotEmpty ? 'Entre des hashtags pour cette fiche' : ''}</span>\n                                                        </label>\n                                                        {this.state.hashtagsView}\n                                                        <div\n                                                            className={'col-12 pl-0 pr-0'}>\n                                                            <HashtagInput\n                                                                id={'add-hashtags'}\n                                                                className={'form-control w-100 mt-0 rounded hashtag-input col-12'}\n                                                                type={'text'}\n                                                                baseIndent={-3}\n                                                                onUpdate={this.emptyInput}\n                                                                updateHashtagsView={this.updateHashtagsView}\n                                                                updateHashtags={this.updateHashtags}\n                                                                updateText={this.updateText}\n                                                                hashtagClassName={'hashtag-input-box hashtag'}\n                                                            />\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            <div\n                                                className={'row container-fluid pr-0 pl-4 pl-lg-0 pl-md-0 pl-sm-0'}>\n                                                <SubmitButton\n                                                    text={'Une nouvelle fiche ? Ajoute-la !'}\n                                                    onClick={this.addCourseSheet}\n                                                    className={'col-sm-12 container-fluid add-course-sheet-button mt-5 mr-0 ml-0 pl-0'}\n                                                    disconnectButton={'plus'}\n                                                />\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            );\n                        }\n                    }\n                }\n            </div>\n        )\n    }\n}\n\nexport default LobbyBody;\n"]},"metadata":{},"sourceType":"module"}