{"ast":null,"code":"var _jsxFileName = \"/usr/src/app/client/src/View/Lobby/Lobby.tsx\";\nimport React from 'react';\nimport Divider from '../General/Divider';\nimport Messages from './Messages';\nimport CourseSheets from \"./CourseSheets\";\nimport WriteMessageZone from './WriteMessageZone';\nimport Request from \"../../API/Request\";\nimport '../../css/Lobby.css';\nimport { Switch, Route, BrowserRouter as Router } from \"react-router-dom\";\nimport { ReactComponent as Loader } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../img/loader.svg\";\n\nclass Lobby extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      right: '',\n      courseSheets: [],\n      message: ''\n    };\n    this.fillCourseSheets = this.fillCourseSheets.bind(this);\n    this.setState = this.setState.bind(this);\n    this.refreshMessages = this.refreshMessages.bind(this);\n  }\n\n  componentDidMount() {\n    new Request('/lobby/coursesheets/' + this.props.location.pathname.split(/\\//)[2], this.fillCourseSheets);\n  }\n\n  sendMessage() {\n    new Request('/lobby/addMessage/' + this.props.location.pathname.split(/\\//)[2], this.refreshMessages, 'POST', {\n      content: this.state.message\n    });\n  }\n\n  refreshMessages(data) {\n    console.log(data);\n    this.forceUpdate();\n  }\n\n  fillCourseSheets(data) {\n    if (undefined === data['message']) {\n      this.setState({\n        courseSheets: data\n      });\n      this.setState({\n        right: 'true'\n      });\n    } else if (data['message'].includes('right')) {\n      this.setState({\n        right: 'false'\n      });\n    } else {\n      this.setState({\n        right: 'true'\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(Router, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: this.props.path,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, \"Veuillez choisir un lobby\")), React.createElement(Route, {\n      path: this.props.location.pathname,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, () => {\n      if ('true' === this.state.right) {\n        return React.createElement(\"section\", {\n          className: \"content row container-fluid pr-sm-0\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }, React.createElement(LobbyTop, {\n          id: this.props.location.pathname.split(/\\//)[2],\n          courseSheets: this.state.courseSheets,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }), React.createElement(LobbyBody, {\n          id: this.props.location.pathname.split(/\\//)[2],\n          courseSheets: this.state.courseSheets,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }));\n      } else if ('false' === this.state.right) {\n        return React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }, \"Vous n'avez pas les droits n\\xE9cessaires pour acc\\xE9der \\xE0 ce lobby\");\n      } else {\n        return React.createElement(\"div\", {\n          className: 'mt-5',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }, React.createElement(Loader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }));\n      }\n    })));\n  }\n\n}\n\nclass LobbyTop extends React.Component {\n  render() {\n    return React.createElement(\"div\", {\n      className: \"row container-fluid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(LobbyDescription, {\n      id: this.props.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }), React.createElement(LobbySummary, {\n      courseSheets: this.props.courseSheets,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }));\n  }\n\n}\n\nclass LobbySummary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.renderList = this.renderList.bind(this);\n  }\n\n  renderList() {\n    let res = [],\n        i = 0;\n\n    for (let courseSheet of this.props.courseSheets) {\n      res.push(React.createElement(\"li\", {\n        key: i,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: 'mb-0',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, courseSheet['title'])));\n      i++;\n    }\n\n    return res;\n  }\n\n  render() {\n    return React.createElement(\"section\", {\n      className: \"col-lg-12 col-sm-12 mt-sm-2 pr-sm-0 pr-xs-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"text-left mb-0 mt-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"Sommaire\"), React.createElement(\"ul\", {\n      className: \"lobby-summary-list list-unstyled text-left ml-1 mt-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, this.renderList()), React.createElement(Divider, {\n      className: 'offset-lg-3 col-lg-6 offset-md-2 col-md-8 col-sm-6 col-xs-6 mt-5 mb-2',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }));\n  }\n\n}\n\nclass LobbyDescription extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      lobby: []\n    };\n    this.fillDescription = this.fillDescription.bind(this);\n    this.setState = this.setState.bind(this);\n  }\n\n  componentDidMount() {\n    new Request('/lobby/consult/' + this.props.id, this.fillDescription);\n  }\n\n  fillDescription(data) {\n    this.setState({\n      lobby: data[0]\n    });\n  }\n\n  render() {\n    return React.createElement(\"section\", {\n      className: \"col-lg-12 col-sm-12 pr-lg-0 pr-md-0 pr-sm-0 pr-xs-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: 'row container-fluid pl-lg-0 pl-md-0 pl-sm-0 pl-xs-0 pr-sm-0 pr-xs-0',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: 'col-lg-10 col-md-10 col-sm-10 col-xs-12 pt-lg-1',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"text-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, this.state.lobby['label_lobby'])), React.createElement(\"div\", {\n      className: 'col-lg-2 col-md-2 col-sm-2 col-xs-4 pt-lg-5 pt-md-2 pt-sm-5 pt-xs-2 text-sm-left ml-0 pl-0 pr-sm-0',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: '/',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-default btn-block edit-lobby-button mt-lg-2 rounded-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, \"Modifier\")))), React.createElement(\"div\", {\n      className: 'row ml-lg-1 ml-sm-1 w-100',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"lobby-description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, this.state.lobby['description'])), React.createElement(Divider, {\n      className: 'col-lg-3 col-md-6 col-sm-6 col-xs-6 mt-5 mb-5',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }));\n  }\n\n}\n\nclass LobbyBody extends React.Component {\n  render() {\n    return React.createElement(\"div\", {\n      className: 'col-lg-12 col-md-12 col-sm-12 col-xs-12',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: 'col-lg-6 col-md-6 col-sm-12 col-xs-12 container-fluid',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, React.createElement(CourseSheets, {\n      id: this.props.id,\n      courseSheets: this.props.courseSheets,\n      className: 'mt-lg-3',\n      activeRemoveButton: false,\n      removableHashtags: false,\n      delete: undefined,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: 'col-lg-6 col-md-6 col-sm-12 col-xs-12 container-fluid',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: 'row',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, React.createElement(Messages, {\n      id: this.props.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: 'row',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, React.createElement(WriteMessageZone, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default Lobby;","map":{"version":3,"sources":["/usr/src/app/client/src/View/Lobby/Lobby.tsx"],"names":["React","Divider","Messages","CourseSheets","WriteMessageZone","Request","Switch","Route","BrowserRouter","Router","Lobby","Component","constructor","props","state","right","courseSheets","message","fillCourseSheets","bind","setState","refreshMessages","componentDidMount","location","pathname","split","sendMessage","content","data","console","log","forceUpdate","undefined","includes","render","path","LobbyTop","id","LobbySummary","renderList","res","i","courseSheet","push","LobbyDescription","lobby","fillDescription","LobbyBody"],"mappings":"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","sourcesContent":["import React, {ReactNode} from 'react';\nimport Divider from '../General/Divider';\nimport Messages from './Messages';\nimport CourseSheets from \"./CourseSheets\";\nimport WriteMessageZone from './WriteMessageZone';\nimport Request from \"../../API/Request\";\nimport '../../css/Lobby.css';\nimport {\n    Switch,\n    Route,\n    BrowserRouter as Router,\n} from \"react-router-dom\";\nimport {ReactComponent as Loader} from \"../../img/loader.svg\";\n\ninterface LobbyState {\n    right: string,\n    courseSheets: [],\n    message: string,\n}\n\nclass Lobby extends React.Component<any, LobbyState> {\n\n    public constructor(props: any) {\n        super(props);\n        this.state = {\n            right: '',\n            courseSheets: [],\n            message: '',\n        }\n        this.fillCourseSheets = this.fillCourseSheets.bind(this);\n        this.setState = this.setState.bind(this);\n        this.refreshMessages =this.refreshMessages.bind(this);\n    }\n\n    public componentDidMount(): void {\n        new Request(\n            '/lobby/coursesheets/' +\n            this.props.location.pathname.split(/\\//)[2],\n            this.fillCourseSheets\n        );\n    }\n\n    public sendMessage(): void {\n        new Request(\n            '/lobby/addMessage/' + this.props.location.pathname.split(/\\//)[2],\n            this.refreshMessages,\n            'POST',\n            {content: this.state.message}\n        );\n    }\n\n    public refreshMessages(data: any): void {\n        console.log(data);\n        this.forceUpdate();\n    }\n\n    public fillCourseSheets(data: any): void {\n        if (undefined === data['message']) {\n            this.setState({courseSheets: data});\n            this.setState({right: 'true'});\n        } else if (data['message'].includes('right')) {\n            this.setState({right: 'false'});\n        } else {\n            this.setState({right: 'true'});\n        }\n    }\n\n    public render(): ReactNode {\n        return (\n            <Router>\n                <Switch>\n                    <Route exact path={this.props.path}>\n                        <h3>Veuillez choisir un lobby</h3>\n                    </Route>\n                    <Route path={this.props.location.pathname}>\n                        {() => {\n                            if ('true' === this.state.right) {\n                                return (\n                                    <section className={\"content row container-fluid pr-sm-0\"}>\n                                        <LobbyTop id={this.props.location.pathname.split(/\\//)[2]}\n                                                  courseSheets={this.state.courseSheets}/>\n                                        <LobbyBody id={this.props.location.pathname.split(/\\//)[2]}\n                                                   courseSheets={this.state.courseSheets}/>\n                                    </section>\n                                );\n                            } else if ('false' === this.state.right) {\n                                return <h2>Vous n'avez pas les droits nécessaires pour accéder à ce lobby</h2>\n                            } else {\n                                return <div className={'mt-5'}><Loader/></div>\n                            }\n                        }}\n                    </Route>\n                </Switch>\n            </Router>\n        );\n    }\n}\n\nclass LobbyTop extends React.Component<{ id: string, courseSheets: [] }, {}> {\n    public render(): ReactNode {\n        return (\n            <div className=\"row container-fluid\">\n                <LobbyDescription id={this.props.id}/>\n                <LobbySummary courseSheets={this.props.courseSheets}/>\n            </div>\n        )\n    }\n}\n\nclass LobbySummary extends React.Component<{ courseSheets: [] }, {}> {\n    constructor(props: any) {\n        super(props);\n        this.renderList = this.renderList.bind(this);\n    }\n\n    public renderList(): ReactNode {\n        let res = [], i = 0;\n        for (let courseSheet of this.props.courseSheets) {\n            res.push(<li key={i}><p className={'mb-0'}>{courseSheet['title']}</p></li>);\n            i++;\n        }\n        return res;\n    }\n\n    public render(): ReactNode {\n        return (\n            <section className=\"col-lg-12 col-sm-12 mt-sm-2 pr-sm-0 pr-xs-0\">\n                <h2 className=\"text-left mb-0 mt-0\">Sommaire</h2>\n                <ul className=\"lobby-summary-list list-unstyled text-left ml-1 mt-3\">\n                    {this.renderList()}\n                </ul>\n                <Divider\n                    className={'offset-lg-3 col-lg-6 offset-md-2 col-md-8 col-sm-6 col-xs-6 mt-5 mb-2'}/>\n            </section>\n        )\n    }\n}\n\nclass LobbyDescription extends React.Component<{ id: string }, { lobby: any }> {\n    public constructor(props: any) {\n        super(props);\n        this.state = {\n            lobby: []\n        };\n        this.fillDescription = this.fillDescription.bind(this);\n        this.setState = this.setState.bind(this);\n    }\n\n    public componentDidMount(): void {\n        new Request('/lobby/consult/' + this.props.id, this.fillDescription);\n    }\n\n    public fillDescription(data: any): void {\n        this.setState({lobby: data[0]});\n    }\n\n    public render(): ReactNode {\n        return (\n            <section className=\"col-lg-12 col-sm-12 pr-lg-0 pr-md-0 pr-sm-0 pr-xs-0\">\n                <div className={'row container-fluid pl-lg-0 pl-md-0 pl-sm-0 pl-xs-0 pr-sm-0 pr-xs-0'}>\n                    <div className={'col-lg-10 col-md-10 col-sm-10 col-xs-12 pt-lg-1'}>\n                        <h1 className=\"text-left\">{this.state.lobby['label_lobby']}</h1>\n                    </div>\n                    <div className={'col-lg-2 col-md-2 col-sm-2 col-xs-4 pt-lg-5 pt-md-2 pt-sm-5 pt-xs-2 text-sm-left ml-0 pl-0 pr-sm-0'}>\n                        <a href={'/'}>\n                            <button className=\"btn btn-default btn-block edit-lobby-button mt-lg-2 rounded-1\">Modifier</button>\n                        </a>\n                    </div>\n                </div>\n                <div className={'row ml-lg-1 ml-sm-1 w-100'}>\n                    <p className=\"lobby-description\">{this.state.lobby['description']}</p>\n                </div>\n                <Divider className={'col-lg-3 col-md-6 col-sm-6 col-xs-6 mt-5 mb-5'}/>\n            </section>\n        )\n    }\n}\n\nclass LobbyBody extends React.Component<{ id: string, courseSheets: [] }, {}> {\n    public render(): ReactNode {\n        return (\n            <div className={'col-lg-12 col-md-12 col-sm-12 col-xs-12'}>\n                <div className={'col-lg-6 col-md-6 col-sm-12 col-xs-12 container-fluid'}>\n                    <CourseSheets\n                        id={this.props.id}\n                        courseSheets={this.props.courseSheets}\n                        className={'mt-lg-3'}\n                        activeRemoveButton={false}\n                        removableHashtags={false}\n                        delete={undefined}\n                    />\n                </div>\n                <div className={'col-lg-6 col-md-6 col-sm-12 col-xs-12 container-fluid'}>\n                    <div className={'row'}>\n                        <Messages id={this.props.id}/>\n                    </div>\n                    <div className={'row'}>\n                        <WriteMessageZone/>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Lobby;\n"]},"metadata":{},"sourceType":"module"}