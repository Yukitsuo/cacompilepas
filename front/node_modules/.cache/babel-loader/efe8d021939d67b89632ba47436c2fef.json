{"ast":null,"code":"var _jsxFileName = \"/usr/src/app/client/src/View/Lobby/CourseSheet.tsx\";\nimport React from 'react';\nimport '../../css/CourseSheet.css';\nimport exampleImage from '../../img/example.png';\nimport minusIcon from '../../img/minus-icon-red-t.png';\n\nclass CourseSheet extends React.Component {\n  constructor(props) {\n    super(props);\n    this.getFile = this.getFile.bind(this);\n    this.redirect = this.redirect.bind(this);\n  }\n\n  redirect(data) {\n    // @ts-ignore\n    // window.location = document.referrer;\n\n    /*\n    this.setState({src: atob(data)});\n    const anchor = document.createElement('a');\n    anchor.href = window.URL.createObjectURL(new Blob([data], { type: 'text/plain' }));\n    anchor.download = 'file';\n    anchor.click();*/\n    console.log(this.state.src);\n    console.log('redirect');\n    console.log(data);\n  }\n\n  getFile(event) {\n    event.preventDefault();\n    let link = event.target;\n    /*new Request(\n        '/lobby/logo/' + this.props.idLobby,\n        this.redirect,\n        'POST',\n        {\n            path: link.href.split(/\\//)[link.href.split(/\\//).length - 1]\n        },\n        );*/\n\n    let data = JSON.stringify({\n      path: link.href.split(/\\//)[link.href.split(/\\//).length - 1]\n    });\n    fetch('http://localhost/?module=lobby&action=logo&param=1', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + localStorage.getItem('token')\n      },\n      body: data\n    }).then(response => response.blob()).then(file => {\n      const link = document.createElement('a');\n      var blob = new Blob([file], {\n        type: \"application/pdf\"\n      }); //var URL = window.URL || window.webkitURL;\n      //var downloadUrl = URL.createObjectURL(blob);\n      //console.log(downloadUrl);\n\n      link.href = URL.createObjectURL(blob);\n      link.download = 'hell.pdf';\n      link.target = '_blank';\n      document.body.append(link);\n      link.click();\n      link.remove();\n      console.log(blob); //console.log(URL);\n      // @ts-ignore\n      //document.location = downloadUrl;\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      id: 'coursesheet-' + this.props.id,\n      className: 'row mt-5 col-lg-12 col-md-12 col-sm-12 col-xs-12',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: 'col-lg-2 col-md-2 col-sm-2 col-xs-2 mt-lg-4 mt-md-4 mt-sm-4 mt-xs-4 pl-lg-0 pl-md-0 pl-sm-0 pl-xs-0 pr-lg-0 pr-md-0 pr-sm-0 pr-xs-0',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: 'course-sheet-image rounded',\n      src: exampleImage,\n      alt: 'Course sheet',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: 'col-lg-10 col-md-10 col-sm-10 col-xs-10',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: 'container-fluid row pl-0',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      className: 'col-lg-11 col-md-11 col-sm-11 col-xs-11 text-left mt-lg-0 mt-md-0 mt-sm-0 mt-xs-0',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, this.props.title), this.props.activeRemoveButton ? React.createElement(\"div\", {\n      className: 'col-lg-1 col-md-1 col-sm-1 col-xs-1',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      id: 'coursesheet-remove-' + this.props.id,\n      src: minusIcon,\n      alt: 'Minus Icon',\n      className: 'remove-button plus-icon ml-5 mr-0',\n      onClick: this.props.delete,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    })) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: 'course-sheet-presentation ml-lg-1 ml-md-1 ml-sm-1 ml-xs-1',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: 'course-sheet-description',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, this.props.description), React.createElement(\"footer\", {\n      className: 'pl-lg-0',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: this.props.link,\n      className: 'course-sheet-link col-lg-6 col-md-6 col-sm-6 col-xs-6 text-lg-left text-md-left text-sm-left text-xs-left pl-lg-0 pl-md-0 pl-sm-0 pl-xs-0 d-block mt-lg-2 mt-md-2 mt-sm-2 mt-xs-2',\n      onClick: this.getFile,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \"Lien vers la fiche\"), React.createElement(\"h4\", {\n      className: 'col-lg-6 col-md-6 col-sm-6 col-xs-6 text-lg-right text-md-right text-sm-right text-xs-right',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"Mathys\")))));\n  }\n\n}\n\nexport default CourseSheet;","map":{"version":3,"sources":["/usr/src/app/client/src/View/Lobby/CourseSheet.tsx"],"names":["React","exampleImage","minusIcon","CourseSheet","Component","constructor","props","getFile","bind","redirect","data","console","log","state","src","event","preventDefault","link","target","JSON","stringify","path","href","split","length","fetch","method","headers","localStorage","getItem","body","then","response","blob","file","document","createElement","Blob","type","URL","createObjectURL","download","append","click","remove","render","id","title","activeRemoveButton","delete","description"],"mappings":"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","sourcesContent":["import React, {ReactNode} from 'react';\nimport Request from \"../../API/Request\";\nimport '../../css/CourseSheet.css';\nimport exampleImage from '../../img/example.png';\nimport minusIcon from '../../img/minus-icon-red-t.png';\nimport {stringify} from \"querystring\";\n\ninterface CourseSheetProps {\n    id: string,\n    idLobby: string,\n    title: string,\n    publication_date: string,\n    link: string,\n    description: string,\n    activeRemoveButton: boolean,\n    delete: ((event: React.MouseEvent<HTMLImageElement, MouseEvent>) => void) | undefined,\n}\n\nclass CourseSheet extends React.Component<CourseSheetProps, {src: string}> {\n    public constructor(props: CourseSheetProps) {\n        super(props);\n        this.getFile = this.getFile.bind(this);\n        this.redirect = this.redirect.bind(this);\n    }\n\n    public redirect(data: any): void {\n        // @ts-ignore\n        // window.location = document.referrer;\n        /*\n        this.setState({src: atob(data)});\n        const anchor = document.createElement('a');\n        anchor.href = window.URL.createObjectURL(new Blob([data], { type: 'text/plain' }));\n        anchor.download = 'file';\n        anchor.click();*/\n        console.log(this.state.src);\n        console.log('redirect');\n        console.log(data);\n    }\n\n    public getFile(event: React.MouseEvent<HTMLAnchorElement, MouseEvent>): void {\n        event.preventDefault();\n        let link: any = event.target;\n        /*new Request(\n            '/lobby/logo/' + this.props.idLobby,\n            this.redirect,\n            'POST',\n            {\n                path: link.href.split(/\\//)[link.href.split(/\\//).length - 1]\n            },\n            );*/\n        let data = JSON.stringify({\n            path: link.href.split(/\\//)[link.href.split(/\\//).length - 1]\n        });\n        fetch('http://localhost/?module=lobby&action=logo&param=1',\n            {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': 'Bearer ' + localStorage.getItem('token'),\n                },\n                body: data,\n            })\n            .then(response => response.blob())\n            .then(file => {\n                const link = document.createElement('a');\n                var blob = new Blob([file], { type: \"application/pdf\" });\n                //var URL = window.URL || window.webkitURL;\n                //var downloadUrl = URL.createObjectURL(blob);\n                //console.log(downloadUrl);\n                link.href = URL.createObjectURL(blob);\n                link.download = 'hell.pdf';\n                link.target='_blank';\n                document.body.append(link);\n                link.click();\n                link.remove();\n                console.log(blob);\n                //console.log(URL);\n                // @ts-ignore\n                //document.location = downloadUrl;\n            });\n    }\n\n    public render(): ReactNode {\n        return (\n            <div id={'coursesheet-' + this.props.id} className={'row mt-5 col-lg-12 col-md-12 col-sm-12 col-xs-12'}>\n                <div\n                    className={'col-lg-2 col-md-2 col-sm-2 col-xs-2 mt-lg-4 mt-md-4 mt-sm-4 mt-xs-4 pl-lg-0 pl-md-0 pl-sm-0 pl-xs-0 pr-lg-0 pr-md-0 pr-sm-0 pr-xs-0'}>\n                    <img className={'course-sheet-image rounded'} src={exampleImage} alt={'Course sheet'}/>\n                </div>\n                <div className={'col-lg-10 col-md-10 col-sm-10 col-xs-10'}>\n                    <div className={'container-fluid row pl-0'}>\n                        <h3 className={'col-lg-11 col-md-11 col-sm-11 col-xs-11 text-left mt-lg-0 mt-md-0 mt-sm-0 mt-xs-0'}>{this.props.title}</h3>\n                        {this.props.activeRemoveButton ?\n                            <div className={'col-lg-1 col-md-1 col-sm-1 col-xs-1'}>\n                                <img\n                                     id={'coursesheet-remove-' + this.props.id}\n                                     src={minusIcon}\n                                     alt={'Minus Icon'}\n                                     className={'remove-button plus-icon ml-5 mr-0'}\n                                     onClick={this.props.delete}\n                            />\n                            </div> :\n                            <div></div>}\n                    </div>\n                    <div className={'course-sheet-presentation ml-lg-1 ml-md-1 ml-sm-1 ml-xs-1'}>\n                        <p className={'course-sheet-description'}>{this.props.description}</p>\n                        <footer className={'pl-lg-0'}>\n                            <a href={this.props.link}\n                               className={'course-sheet-link col-lg-6 col-md-6 col-sm-6 col-xs-6 text-lg-left text-md-left text-sm-left text-xs-left pl-lg-0 pl-md-0 pl-sm-0 pl-xs-0 d-block mt-lg-2 mt-md-2 mt-sm-2 mt-xs-2'}\n                               onClick={this.getFile}\n                            >Lien vers la fiche</a>\n                            <h4 className={'col-lg-6 col-md-6 col-sm-6 col-xs-6 text-lg-right text-md-right text-sm-right text-xs-right'}>Mathys</h4>\n                        </footer>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default CourseSheet;\n"]},"metadata":{},"sourceType":"module"}