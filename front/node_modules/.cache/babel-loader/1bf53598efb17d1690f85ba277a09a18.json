{"ast":null,"code":"var _jsxFileName = \"/usr/src/app/client/src/View/Lobby/Lobby.tsx\";\nimport React from 'react';\nimport Divider from '../General/Divider';\nimport CourseSheet from \"./CourseSheet\";\nimport Message from \"./Message\";\nimport WriteMessageZone from './WriteMessageZone';\nimport Request from \"../../API/Request\";\nimport '../../css/Lobby.css';\nimport { Switch, Route, BrowserRouter as Router } from \"react-router-dom\";\nimport { ReactComponent as Loader } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../img/loader.svg\";\n\nclass Lobby extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      right: '',\n      courseSheets: []\n    };\n    this.fillCourseSheets = this.fillCourseSheets.bind(this);\n    this.setState = this.setState.bind(this);\n  }\n\n  componentDidMount() {\n    new Request('/lobby/coursesheets/' + this.props.location.pathname.split(/\\//)[2], 'POST', 'json', {\n      token: localStorage.getItem('token')\n    }, this.fillCourseSheets);\n  }\n\n  fillCourseSheets(data) {\n    if (undefined === data['message']) {\n      this.setState({\n        courseSheets: data\n      });\n      this.setState({\n        right: 'true'\n      });\n    } else {\n      this.setState({\n        right: 'false'\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(Router, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41\n      },\n      __self: this\n    }, React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: this.props.path,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }, \"Veuillez choisir un lobby\")), React.createElement(Route, {\n      path: this.props.location.pathname,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }, () => {\n      if ('true' === this.state.right) {\n        return React.createElement(\"section\", {\n          className: \"content row container-fluid\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50\n          },\n          __self: this\n        }, React.createElement(LobbyTop, {\n          id: this.props.location.pathname.split(/\\//)[2],\n          courseSheets: this.state.courseSheets,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51\n          },\n          __self: this\n        }), React.createElement(LobbyBody, {\n          id: this.props.location.pathname.split(/\\//)[2],\n          courseSheets: this.state.courseSheets,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53\n          },\n          __self: this\n        }));\n      } else if ('false' === this.state.right) {\n        return React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58\n          },\n          __self: this\n        }, \"Vous n'avez pas les droits n\\xE9cessaires pour acc\\xE9der \\xE0 ce lobby\");\n      } else {\n        return React.createElement(\"div\", {\n          className: 'mt-5',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }, React.createElement(Loader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }));\n      }\n    })));\n  }\n\n}\n\nclass LobbyTop extends React.Component {\n  render() {\n    return React.createElement(\"div\", {\n      className: \"row col-lg-12 col-sm-12 mt-lg-5 mt-sm-5 mr-lg-0 mr-sm-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(LobbySummary, {\n      courseSheets: this.props.courseSheets,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }), React.createElement(LobbyDescription, {\n      id: this.props.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }));\n  }\n\n}\n\nclass LobbySummary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.renderList = this.renderList.bind(this);\n  }\n\n  renderList() {\n    let res = [],\n        i = 0;\n\n    for (let courseSheet of this.props.courseSheets) {\n      res.push(React.createElement(\"li\", {\n        key: i,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, courseSheet['title']));\n      i++;\n    }\n\n    return res;\n  }\n\n  render() {\n    return React.createElement(\"section\", {\n      className: \"col-lg-6 col-sm-6 ml-lg-0 ml-sm-0 pl-lg-0 pl-sm-0 top-section\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"text-left mb-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, \"Sommaire\"), React.createElement(\"ul\", {\n      className: \"ccp-list list-unstyled text-left ml-1 mt-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, this.renderList()), React.createElement(Divider, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }));\n  }\n\n}\n\nclass LobbyDescription extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      lobby: []\n    };\n    this.fillDescription = this.fillDescription.bind(this);\n    this.setState = this.setState.bind(this);\n  }\n\n  componentDidMount() {\n    new Request('/lobby/consult/' + this.props.id, 'POST', 'json', {\n      token: localStorage.getItem('token')\n    }, this.fillDescription);\n  }\n\n  fillDescription(data) {\n    this.setState({\n      lobby: data\n    });\n  }\n\n  render() {\n    return React.createElement(\"section\", {\n      className: \"col-lg-6 col-sm-6 pr-sm-0 top-section\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"ml-lg-0 text-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, this.state.lobby['label_lobby']), React.createElement(\"p\", {\n      className: \"ml-lg-2 ml-sm-1 course-sheet-presentation w-100\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, this.state.lobby['description']), React.createElement(Divider, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }));\n  }\n\n}\n\nclass LobbyBody extends React.Component {\n  render() {\n    return React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(Messages, {\n      id: this.props.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }), React.createElement(CourseSheets, {\n      id: this.props.id,\n      courseSheets: this.props.courseSheets,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }), React.createElement(WriteMessageZone, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }));\n  }\n\n}\n\nclass Messages extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      messages: []\n    };\n    this.renderMessage = this.renderMessage.bind(this);\n    this.renderMessages = this.renderMessages.bind(this);\n    this.fillMessages = this.fillMessages.bind(this);\n    this.setState = this.setState.bind(this);\n  }\n\n  componentDidMount() {\n    new Request('/lobby/messages/' + this.props.id, 'POST', 'json', {\n      token: localStorage.getItem('token')\n    }, this.fillMessages);\n  }\n\n  fillMessages(data) {\n    this.setState({\n      messages: data\n    });\n  }\n\n  renderMessage(key, content, send_date, pseudo) {\n    return React.createElement(Message, {\n      key: key,\n      content: content,\n      send_date: send_date,\n      pseudo: pseudo,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    });\n  }\n\n  renderMessages() {\n    // @ts-ignore\n    if (undefined === this.state.messages['message']) {\n      let res = [],\n          i = 0;\n\n      for (let message of this.state.messages) {\n        res.push(this.renderMessage(i.toString(), message['content'], message['send_date'], message['pseudo']));\n        i++;\n      }\n\n      return res;\n    } else {\n      return [];\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"col-lg-6 col-sm-12 pl-lg-0 pl-sm-0 pr-lg-5 mt-lg-3 mt-sm-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      className: \"messages-list list-unstyled\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, this.renderMessages()));\n  }\n\n}\n\nclass CourseSheets extends React.Component {\n  constructor(props) {\n    super(props);\n    this.renderCourseSheets = this.renderCourseSheets.bind(this);\n    this.renderCourseSheet = this.renderCourseSheet.bind(this);\n  }\n\n  renderCourseSheet(i, title, publication_date, link, description) {\n    return React.createElement(CourseSheet, {\n      key: i,\n      title: title,\n      publication_date: publication_date,\n      link: link,\n      description: description,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    });\n  }\n\n  renderCourseSheets() {\n    // @ts-ignore\n    if (undefined === this.props.courseSheets['is_empty']) {\n      let res = [],\n          i = 0;\n\n      for (let courseSheet of this.props.courseSheets) {\n        res.push(this.renderCourseSheet(i.toString(), courseSheet['title'], courseSheet['publication_date'], courseSheet['link'], courseSheet['description']));\n        i++;\n      }\n\n      return res;\n    } else {\n      return [];\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"col-lg-6 col-sm-12 mt-lg-3 course-sheets-section\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, this.renderCourseSheets());\n  }\n\n}\n\nexport default Lobby;","map":{"version":3,"sources":["/usr/src/app/client/src/View/Lobby/Lobby.tsx"],"names":["React","Divider","CourseSheet","Message","WriteMessageZone","Request","Switch","Route","BrowserRouter","Router","Lobby","Component","constructor","props","state","right","courseSheets","fillCourseSheets","bind","setState","componentDidMount","location","pathname","split","token","localStorage","getItem","data","undefined","render","path","LobbyTop","id","LobbySummary","renderList","res","i","courseSheet","push","LobbyDescription","lobby","fillDescription","LobbyBody","Messages","messages","renderMessage","renderMessages","fillMessages","key","content","send_date","pseudo","message","toString","CourseSheets","renderCourseSheets","renderCourseSheet","title","publication_date","link","description"],"mappings":"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","sourcesContent":["import React, {ReactNode} from 'react';\nimport Divider from '../General/Divider';\nimport CourseSheet from \"./CourseSheet\";\nimport Message from \"./Message\";\nimport WriteMessageZone from './WriteMessageZone';\nimport Request from \"../../API/Request\";\nimport '../../css/Lobby.css';\nimport {\n    Switch,\n    Route,\n    BrowserRouter as Router,\n} from \"react-router-dom\";\nimport {ReactComponent as Loader} from \"../../img/loader.svg\";\n\nclass Lobby extends React.Component<any, { right: string, courseSheets: [] }> {\n    public constructor(props: any) {\n        super(props);\n        this.state = {\n            right: '',\n            courseSheets: [],\n        }\n        this.fillCourseSheets = this.fillCourseSheets.bind(this);\n        this.setState = this.setState.bind(this);\n    }\n\n    public componentDidMount(): void {\n        new Request('/lobby/coursesheets/' + this.props.location.pathname.split(/\\//)[2], 'POST', 'json', {token: localStorage.getItem('token')}, this.fillCourseSheets);\n    }\n\n    public fillCourseSheets(data: any): void {\n        if (undefined === data['message']) {\n            this.setState({courseSheets: data});\n            this.setState({right: 'true'});\n        } else {\n            this.setState({right: 'false'});\n        }\n    }\n\n    public render(): ReactNode {\n        return (\n            <Router>\n                <Switch>\n                    <Route exact path={this.props.path}>\n                        <h3>Veuillez choisir un lobby</h3>\n                    </Route>\n                    <Route path={this.props.location.pathname}>\n                        {() => {\n                            if ('true' === this.state.right) {\n                                return (\n                                    <section className={\"content row container-fluid\"}>\n                                        <LobbyTop id={this.props.location.pathname.split(/\\//)[2]}\n                                                  courseSheets={this.state.courseSheets}/>\n                                        <LobbyBody id={this.props.location.pathname.split(/\\//)[2]}\n                                                   courseSheets={this.state.courseSheets}/>\n                                    </section>\n                                );\n                            } else if ('false' === this.state.right) {\n                                return <h2>Vous n'avez pas les droits nécessaires pour accéder à ce lobby</h2>\n                            } else {\n                                return <div className={'mt-5'}><Loader/></div>\n                            }\n                        }}\n                    </Route>\n                </Switch>\n            </Router>\n        );\n    }\n}\n\nclass LobbyTop extends React.Component<{ id: string, courseSheets: [] }, {}> {\n    public render(): ReactNode {\n        return (\n            <div className=\"row col-lg-12 col-sm-12 mt-lg-5 mt-sm-5 mr-lg-0 mr-sm-0\">\n                <LobbySummary courseSheets={this.props.courseSheets}/>\n                <LobbyDescription id={this.props.id}/>\n            </div>\n        )\n    }\n}\n\nclass LobbySummary extends React.Component<{ courseSheets: [] }, {}> {\n    constructor(props: any) {\n        super(props);\n        this.renderList = this.renderList.bind(this);\n    }\n\n    public renderList(): ReactNode {\n        let res = [], i = 0;\n        for (let courseSheet of this.props.courseSheets) {\n            res.push(<li key={i}>{courseSheet['title']}</li>);\n            i++;\n        }\n        return res;\n    }\n\n    public render(): ReactNode {\n        return (\n            <section className=\"col-lg-6 col-sm-6 ml-lg-0 ml-sm-0 pl-lg-0 pl-sm-0 top-section\">\n                <h2 className=\"text-left mb-0\">Sommaire</h2>\n                <ul className=\"ccp-list list-unstyled text-left ml-1 mt-3\">\n                    {this.renderList()}\n                </ul>\n                <Divider/>\n            </section>\n        )\n    }\n}\n\nclass LobbyDescription extends React.Component<{ id: string }, { lobby: any }> {\n    public constructor(props: any) {\n        super(props);\n        this.state = {\n            lobby: []\n        };\n        this.fillDescription = this.fillDescription.bind(this);\n        this.setState = this.setState.bind(this);\n    }\n\n    public componentDidMount(): void {\n        new Request('/lobby/consult/' + this.props.id, 'POST', 'json', {token: localStorage.getItem('token')}, this.fillDescription);\n    }\n\n    public fillDescription(data: any): void {\n        this.setState({lobby: data});\n    }\n\n    public render(): ReactNode {\n        return (\n            <section className=\"col-lg-6 col-sm-6 pr-sm-0 top-section\">\n                <h2 className=\"ml-lg-0 text-left\">{this.state.lobby['label_lobby']}</h2>\n                <p className=\"ml-lg-2 ml-sm-1 course-sheet-presentation w-100\">{this.state.lobby['description']}</p>\n                <Divider/>\n            </section>\n        )\n    }\n}\n\nclass LobbyBody extends React.Component<{ id: string, courseSheets: [] }, {}> {\n    public render(): ReactNode {\n        return (\n            <div className={\"col-lg-12 col-md-12 col-sm-12 col-xs-12\"}>\n                <Messages id={this.props.id}/>\n                <CourseSheets id={this.props.id} courseSheets={this.props.courseSheets}/>\n                <WriteMessageZone/>\n            </div>\n        )\n    }\n}\n\nclass Messages extends React.Component<{ id: string }, { messages: [] }> {\n    public constructor(props: any) {\n        super(props);\n        this.state = {\n            messages: [],\n        }\n        this.renderMessage = this.renderMessage.bind(this);\n        this.renderMessages = this.renderMessages.bind(this);\n        this.fillMessages = this.fillMessages.bind(this);\n        this.setState = this.setState.bind(this);\n    }\n\n    public componentDidMount(): void {\n        new Request('/lobby/messages/' + this.props.id, 'POST', 'json', {token: localStorage.getItem('token')}, this.fillMessages);\n    }\n\n    public fillMessages(data: any): void {\n        this.setState({messages: data});\n    }\n\n    public renderMessage(key: string, content: string, send_date: string, pseudo: string): ReactNode {\n        return <Message key={key} content={content} send_date={send_date} pseudo={pseudo}/>;\n    }\n\n    public renderMessages(): ({} | null | undefined)[] {\n        // @ts-ignore\n        if (undefined === this.state.messages['message']) {\n            let res = [], i = 0;\n            for (let message of this.state.messages) {\n                res.push(this.renderMessage(i.toString(), message['content'], message['send_date'], message['pseudo']));\n                i++;\n            }\n            return res;\n        } else {\n            return [];\n        }\n    }\n\n    public render(): ReactNode {\n        return (\n            <div className=\"col-lg-6 col-sm-12 pl-lg-0 pl-sm-0 pr-lg-5 mt-lg-3 mt-sm-4\">\n                <ul className=\"messages-list list-unstyled\">\n                    {this.renderMessages()}\n                </ul>\n            </div>\n        )\n    }\n}\n\nclass CourseSheets extends React.Component<{ id: string, courseSheets: [] }, { courseSheets: [] }> {\n\n    public constructor(props: any) {\n        super(props);\n        this.renderCourseSheets = this.renderCourseSheets.bind(this);\n        this.renderCourseSheet = this.renderCourseSheet.bind(this);\n    }\n\n    public renderCourseSheet(i: string, title: string, publication_date: string, link: string, description: string): ReactNode {\n        return <CourseSheet key={i} title={title} publication_date={publication_date} link={link}\n                            description={description}/>;\n    }\n\n    public renderCourseSheets(): ({} | null | undefined)[] {\n        // @ts-ignore\n        if (undefined === this.props.courseSheets['is_empty']) {\n            let res = [], i = 0;\n            for (let courseSheet of this.props.courseSheets) {\n                res.push(this.renderCourseSheet(i.toString(), courseSheet['title'], courseSheet['publication_date'], courseSheet['link'], courseSheet['description']));\n                i++;\n            }\n            return res;\n        } else {\n            return [];\n        }\n    }\n\n    public render(): ReactNode {\n        return (\n            <div className=\"col-lg-6 col-sm-12 mt-lg-3 course-sheets-section\">\n                {this.renderCourseSheets()}\n            </div>\n        )\n    }\n}\n\nexport default Lobby;\n"]},"metadata":{},"sourceType":"module"}