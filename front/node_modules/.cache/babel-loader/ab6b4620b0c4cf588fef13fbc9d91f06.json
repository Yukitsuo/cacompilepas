{"ast":null,"code":"var _jsxFileName = \"/usr/src/app/client/src/View/Pages/CourseSheetPage.tsx\";\nimport React from \"react\";\nimport Request from \"../../API/Request\";\nimport { Document, Page, pdfjs } from \"react-pdf\";\n\nclass CourseSheetPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      file: null\n    };\n    this.getFile = this.getFile.bind(this);\n    this.openFile = this.openFile.bind(this);\n    this.onDocumentLoadSuccess = this.onDocumentLoadSuccess.bind(this);\n  }\n\n  componentDidMount() {\n    this.getFile();\n  }\n\n  getFile() {\n    new Request('/lobby/coursesheet/' + this.props.location.pathname.split(/\\//)[2], this.openFile, 'POST', {\n      path: this.props.location.pathname.split(/\\//)[3]\n    }, 'json', 'blob');\n  }\n\n  openFile(data) {\n    this.setState({\n      file: data\n    }, () => pdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`);\n  }\n\n  onDocumentLoadSuccess(document) {\n    console.log(document._pdfInfo.numPages);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: 'mt-0',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, React.createElement(Document, {\n      file: this.state.file,\n      onLoadSuccess: this.onDocumentLoadSuccess,\n      noData: React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, \"Chargement...\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, Array.from(new Array(5), (el, index) => React.createElement(Page, {\n      key: `page_${index + 1}`,\n      pageNumber: index + 1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nexport default CourseSheetPage;","map":{"version":3,"sources":["/usr/src/app/client/src/View/Pages/CourseSheetPage.tsx"],"names":["React","Request","Document","Page","pdfjs","CourseSheetPage","Component","constructor","props","state","file","getFile","bind","openFile","onDocumentLoadSuccess","componentDidMount","location","pathname","split","path","data","setState","GlobalWorkerOptions","workerSrc","version","document","console","log","_pdfInfo","numPages","render","Array","from","el","index"],"mappings":";AAAA,OAAOA,KAAP,MAA+B,OAA/B;AACA,OAAOC,OAAP,MAAoB,mBAApB;AACA,SAAQC,QAAR,EAAkBC,IAAlB,EAAwBC,KAAxB,QAAoC,WAApC;;AAMA,MAAMC,eAAN,SAA8BL,KAAK,CAACM,SAApC,CAAyF;AAE9EC,EAAAA,WAAP,CAAmBC,KAAnB,EAAgD;AAC5C,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACTC,MAAAA,IAAI,EAAE;AADG,KAAb;AAGA,SAAKC,OAAL,GAAe,KAAKA,OAAL,CAAaC,IAAb,CAAkB,IAAlB,CAAf;AACA,SAAKC,QAAL,GAAgB,KAAKA,QAAL,CAAcD,IAAd,CAAmB,IAAnB,CAAhB;AACA,SAAKE,qBAAL,GAA6B,KAAKA,qBAAL,CAA2BF,IAA3B,CAAgC,IAAhC,CAA7B;AACH;;AAEMG,EAAAA,iBAAP,GAAiC;AAC7B,SAAKJ,OAAL;AACH;;AAEMA,EAAAA,OAAP,GAAuB;AACnB,QAAIV,OAAJ,CACI,wBAAwB,KAAKO,KAAL,CAAWQ,QAAX,CAAoBC,QAApB,CAA6BC,KAA7B,CAAmC,IAAnC,EAAyC,CAAzC,CAD5B,EAEI,KAAKL,QAFT,EAGI,MAHJ,EAII;AACIM,MAAAA,IAAI,EAAE,KAAKX,KAAL,CAAWQ,QAAX,CAAoBC,QAApB,CAA6BC,KAA7B,CAAmC,IAAnC,EAAyC,CAAzC;AADV,KAJJ,EAOI,MAPJ,EAQI,MARJ;AAUH;;AAEML,EAAAA,QAAP,CAAgBO,IAAhB,EAAiC;AAC7B,SAAKC,QAAL,CACI;AAACX,MAAAA,IAAI,EAAEU;AAAP,KADJ,EAEI,MAAMhB,KAAK,CAACkB,mBAAN,CAA0BC,SAA1B,GAAuC,2CAA0CnB,KAAK,CAACoB,OAAQ,gBAFzG;AAIH;;AAEMV,EAAAA,qBAAP,CAA6BW,QAA7B,EAAkD;AAC9CC,IAAAA,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACG,QAAT,CAAkBC,QAA9B;AACH;;AAEMC,EAAAA,MAAP,GAA2B;AACvB,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAE,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,QAAD;AACI,MAAA,IAAI,EAAE,KAAKrB,KAAL,CAAWC,IADrB;AAEI,MAAA,aAAa,EAAE,KAAKI,qBAFxB;AAGI,MAAA,MAAM,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAMQiB,KAAK,CAACC,IAAN,CACI,IAAID,KAAJ,CAAU,CAAV,CADJ,EAEI,CAACE,EAAD,EAAKC,KAAL,KACI,oBAAC,IAAD;AACI,MAAA,GAAG,EAAG,QAAOA,KAAK,GAAG,CAAE,EAD3B;AAEI,MAAA,UAAU,EAAEA,KAAK,GAAG,CAFxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHR,CANR,CADJ,CADJ,CADJ;AAuBH;;AAhEoF;;AAmEzF,eAAe7B,eAAf","sourcesContent":["import React, {ReactNode} from \"react\";\nimport Request from \"../../API/Request\";\nimport {Document, Page, pdfjs} from \"react-pdf\";\n\ninterface CourseSheetPageProps {\n    location: any,\n}\n\nclass CourseSheetPage extends React.Component<CourseSheetPageProps, {file: File | null}> {\n\n    public constructor(props: CourseSheetPageProps) {\n        super(props);\n        this.state = {\n            file: null,\n        }\n        this.getFile = this.getFile.bind(this);\n        this.openFile = this.openFile.bind(this);\n        this.onDocumentLoadSuccess = this.onDocumentLoadSuccess.bind(this);\n    }\n\n    public componentDidMount(): void {\n        this.getFile();\n    }\n\n    public getFile(): void {\n        new Request(\n            '/lobby/coursesheet/' + this.props.location.pathname.split(/\\//)[2],\n            this.openFile,\n            'POST',\n            {\n                path: this.props.location.pathname.split(/\\//)[3]\n            },\n            'json',\n            'blob',\n        );\n    }\n\n    public openFile(data: any): void {\n        this.setState(\n            {file: data},\n            () => pdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`\n        );\n    }\n\n    public onDocumentLoadSuccess(document: any): void {\n        console.log(document._pdfInfo.numPages);\n    }\n\n    public render(): ReactNode {\n        return (\n            <div>\n                <div className={'mt-0'}>\n                    <Document\n                        file={this.state.file}\n                        onLoadSuccess={this.onDocumentLoadSuccess}\n                        noData={<h4>Chargement...</h4>}\n                    >\n                        {\n                            Array.from(\n                                new Array(5),\n                                (el, index) => (\n                                    <Page\n                                        key={`page_${index + 1}`}\n                                        pageNumber={index + 1}\n                                    />\n                                ),\n                            )\n                        }\n                    </Document>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default CourseSheetPage;\n"]},"metadata":{},"sourceType":"module"}