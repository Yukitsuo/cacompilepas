{"ast":null,"code":"var _jsxFileName = \"/usr/src/app/client/src/View/General/SearchBar.tsx\";\nimport React from 'react';\nimport Request from \"../../API/Request\";\nimport HashtagInput from \"./HashtagInput\";\nimport ProposalList from \"./ProposalList\";\n\nclass SearchBar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      query: '',\n      proposals: [],\n      inputIsNotEmpty: true,\n      hashtags: [],\n      hashtagsView: React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 24\n        },\n        __self: this\n      }),\n      width: 0\n    };\n    this.emptyInput = this.emptyInput.bind(this);\n    this.updateHashtags = this.updateHashtags.bind(this);\n    this.updateHashtagsView = this.updateHashtagsView.bind(this);\n    this.refreshProposals = this.refreshProposals.bind(this);\n    this.updateQuery = this.updateQuery.bind(this);\n  }\n\n  componentDidMount() {\n    //@ts-ignore\n    this.setState({\n      width: document.getElementById('search').offsetWidth\n    });\n  }\n\n  refreshProposals(data) {\n    this.setState({\n      proposals: undefined === data['message'] ? data.slice(0, 3) : []\n    });\n  }\n\n  emptyInput(isEmpty) {\n    this.setState({\n      inputIsNotEmpty: isEmpty\n    });\n  }\n\n  updateHashtagsView(hashtags) {\n    this.setState({\n      hashtagsView: hashtags\n    });\n  }\n\n  updateHashtags(hashtags) {\n    this.setState({\n      hashtags: hashtags\n    }, this.sendQuery);\n  }\n\n  sendQuery() {\n    new Request('/lobby/search/0', this.refreshProposals, 'POST', {\n      search: this.state.query.split(/ /),\n      hashtags: this.state.hashtags\n    });\n  }\n\n  updateQuery(text) {\n    this.setState({\n      query: text\n    }, this.sendQuery);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: 'container-fluid col-lg-9 col-md-6 col-sm-6 col-xs-6 mt-lg-4 mt-md-4 mt-sm-3 mt-xs-3',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: \"form-inline my-lg-0 my-md-0 my-sm-2 my-xs-2 col-lg-8 col-md-8 col-sm-12 col-xs-12 offset-lg-1 offset-md-1 offset-sm-0 offset-xs-0 p-0 search-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      id: \"search-label\",\n      htmlFor: \"search\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"glyphicon glyphicon-search search-icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      id: \"search-placeholder\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, this.state.inputIsNotEmpty ? 'Rechercher...' : '')), React.createElement(\"div\", {\n      className: 'hashtags-container',\n      style: {\n        width: this.state.width\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, this.state.hashtagsView), React.createElement(HashtagInput, {\n      id: 'search',\n      className: 'form-control mr-sm-2 col-12 w-100 search-input',\n      type: 'search',\n      baseIndent: 14,\n      onUpdate: this.emptyInput,\n      updateHashtagsView: this.updateHashtagsView,\n      updateHashtags: this.updateHashtags,\n      updateText: this.updateQuery,\n      hashtagClassName: '',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    })), (() => 0 !== this.state.proposals.length ? React.createElement(ProposalList, {\n      proposals: this.state.proposals,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }))());\n  }\n\n}\n\nexport default SearchBar;","map":{"version":3,"sources":["/usr/src/app/client/src/View/General/SearchBar.tsx"],"names":["React","Request","HashtagInput","ProposalList","SearchBar","Component","constructor","props","state","query","proposals","inputIsNotEmpty","hashtags","hashtagsView","width","emptyInput","bind","updateHashtags","updateHashtagsView","refreshProposals","updateQuery","componentDidMount","setState","document","getElementById","offsetWidth","data","undefined","slice","isEmpty","sendQuery","search","split","text","render","length"],"mappings":"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","sourcesContent":["import React, {ReactNode} from 'react';\nimport Request from \"../../API/Request\";\nimport HashtagInput from \"./HashtagInput\";\nimport ProposalList from \"./ProposalList\";\n\ninterface SearchBarState {\n    query: string,\n    proposals: [],\n    inputIsNotEmpty: boolean,\n    hashtags: string[],\n    hashtagsView: ReactNode,\n    width: number\n}\n\nclass SearchBar extends React.Component<any, SearchBarState> {\n\n    public constructor(props: any) {\n        super(props);\n        this.state = {\n            query: '',\n            proposals: [],\n            inputIsNotEmpty: true,\n            hashtags: [],\n            hashtagsView: <div></div>,\n            width: 0,\n        }\n        this.emptyInput = this.emptyInput.bind(this);\n        this.updateHashtags = this.updateHashtags.bind(this);\n        this.updateHashtagsView = this.updateHashtagsView.bind(this);\n        this.refreshProposals = this.refreshProposals.bind(this);\n        this.updateQuery = this.updateQuery.bind(this);\n    }\n\n    public componentDidMount(): void {\n        //@ts-ignore\n        this.setState({width: document.getElementById('search').offsetWidth})\n    }\n\n    public refreshProposals(data: any): void {\n        this.setState({proposals: undefined === data['message'] ? data.slice(0, 3) : []});\n    }\n\n    public emptyInput(isEmpty: boolean): void {\n        this.setState({inputIsNotEmpty: isEmpty});\n    }\n\n    public updateHashtagsView(hashtags: ReactNode): void {\n        this.setState({hashtagsView: hashtags});\n    }\n\n    public updateHashtags(hashtags: string[]): void {\n        this.setState(\n            {hashtags: hashtags},\n            this.sendQuery);\n    }\n\n    public sendQuery(): void {\n        new Request(\n            '/lobby/search/0',\n            this.refreshProposals,\n            'POST',\n            {\n                search: this.state.query.split(/ /),\n                hashtags: this.state.hashtags,\n            },\n        );\n    }\n\n    public updateQuery(text: string): void {\n        this.setState(\n            {query: text},\n            this.sendQuery,\n        );\n    }\n\n    public render(): ReactNode {\n        return (\n            <div className={'container-fluid col-lg-9 col-md-6 col-sm-6 col-xs-6 mt-lg-4 mt-md-4 mt-sm-3 mt-xs-3'}>\n                <form\n                    className=\"form-inline my-lg-0 my-md-0 my-sm-2 my-xs-2 col-lg-8 col-md-8 col-sm-12 col-xs-12 offset-lg-1 offset-md-1 offset-sm-0 offset-xs-0 p-0 search-form\">\n                    <label id=\"search-label\" htmlFor=\"search\">\n                        <span className=\"glyphicon glyphicon-search search-icon\"></span>\n                        <span\n                            id=\"search-placeholder\">{this.state.inputIsNotEmpty ? 'Rechercher...' : ''}</span>\n                    </label>\n                    <div\n                        className={'hashtags-container'}\n                        style={{\n                            width: this.state.width,\n                        }}\n                    >\n                        {this.state.hashtagsView}\n                    </div>\n                    <HashtagInput\n                        id={'search'}\n                        className={'form-control mr-sm-2 col-12 w-100 search-input'}\n                        type={'search'}\n                        baseIndent={14}\n                        onUpdate={this.emptyInput}\n                        updateHashtagsView={this.updateHashtagsView}\n                        updateHashtags={this.updateHashtags}\n                        updateText={this.updateQuery}\n                        hashtagClassName={''}\n                    />\n                </form>\n                {(() => 0 !== this.state.proposals.length ?\n                    <ProposalList proposals={this.state.proposals}/> : <div></div>)()}\n            </div>\n        );\n    }\n}\n\nexport default SearchBar;\n"]},"metadata":{},"sourceType":"module"}